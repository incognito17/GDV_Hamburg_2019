---
layout: page
title:  "Unterhaltung in Hamburg"
subheadline: Der Einfluss von Einkommen und Innenstadtnähe auf die Unterhaltungsangebote Hamburgs.
teaser: "Einfluss des Geldes oder Nähe zur Stadtmitte?"
header: no
show_meta: false
categories:
    - projects
image:
    title: projekt_hamburg/hamburg-teaser.png
    caption: Elbphilharmonie - Konzerthaus in Hamburg
author: Sergej Kryvoruchko, Michell Skorna, Simon Karl, Patrick Streitmatter
---

Hamburg -- eine Stadt voller Kultur und Unterhaltung, aber auch eine sehr arme und zugleich sehr reiche Stadt. In diesem Projekt geht es um 

Wir zeigen, dass 

[Abstract 50-100 Wörter] Besteht ein Zusammenhang zwischen dem durchschnittlichen Einkommen einzelner Stadtteile und deren Unterhaltungsangeboten? Sind die "gutverdienenden" Stadtteile in Hamburg weit außerhalb, oder direkt im Zentrum? Wie wirkt sich das auf die Unterhaltungsangebote aus?

(BILDER MÜSSEN GEMACHT WERDEN)

<!-- Teaser muss auf richtiges Format gebracht werden! -->
<!-- Papierprototypen drehen! So sieht's kacke aus. -->

<!--   (Sie können für Ihre Dokumentation sämtliche Auszeichnungen von **Markdown** nutzen.) -->

<!-- Vergnügungsviertel richtiges Wort? (Nicht Unterhaltungsviertel)  (AUFGABE: #Skorna, #Sergej - Weil: #Poster#Dokumentation, #Software/#JS)
 - Scatterplot ist leicht verzerrt      (AUFGABE: #Skorna - Weil: #Poster)
 - "Untertitel ist komisch" (ggf. anders formulieren -- "Zentralität" oder "Vergleich") (AUFGABE: #Skorna - Weil: #Poster)
 - Rot im Farbschema, der Karte im Plakat verwirrend. (Hervorhebung aus dem Bild nehmen)    (AUFGABE: #Sergej - Weil: #Programm) (Grün als Farbe?)
 - ggf. Hervorhebungsfarbe zu Grün ändern oder hinzuschreiben, dass Hervorgehoben wurde.    (s.o.)
 - Schrift aus Bild rausnehmen, lieber als Bilduntertitel setzen und was anderes        (AUFGABE: #Skorna - Weil: #Poster)
 - ggf. mehr Text, Scatterplot kann man verkleinern     (AUFGABE: #Skorna - Weil: #Poster)
 - Nicht Trend signifikant, sondern Korrelation (linerale regressionsanalyse)       (AUFGABE: #Skorna - Weil: #Poster)
 - Regressionslinie im Poster einzeichnen (d.h. Korrelationsgrade im Bild beim Scatterplot mit rho)     (AUFGABE: #Skorna - Weil: #Poster)
 - Bild ggf. mit Legende versehen       (AUFGABE: #Skorna - Weil: #Poster)
 - Dokumentation: Punkt "Einschränkungen" hinzufügen. D.h. was war möglich, was nicht, was könnte noch gemacht werden?      (AUFGABE: #Skorna - Weil: #Dokumentation)
 - POIs und Unterhaltungsangebote identisch, das auch anzeigen. (AUFGABE: #Skorna - Weil: #Dokumentation)
 - Zum eigentlichen Projekt:
    - Rahmen der Karte wegmachen        (AUFGABE: #Sergej)
    - bitte das Scatterplot unten lassen    (AUFGABE: Anmerkung)
    - Verbindung/Cross-Image-Markierungen   (AUFGABE: #Simon/#Patrick - Macht das unter euch aus.)
    - DropDown ggf. nach oben nehmen; Sichtbar machen. Bestenfalls direkt an die Locations Karte.   (AUFGABE: #Sergej - Macht das unter euch aus.)
    - Locations umbenennen zu Unterhaltungsangebote oder POIs.          (AUFGABE: #Sergej)
    - Warum ändert sich die Farbe bei den Selektionen? (Skorna meint: Ist eigentlich ganz hübsch.)      
    - Tooltip mit Offset generieren (leicht nach rechts, dass es nicht auf der Maus ist)        (AUFGABE: #Simon)
    - Den blauen Punkten eine weiße Outline geben.                  (AUFGABE: #Patrick, wenn es Sergej nicht macht.)
 - Poster mit "Small-Multiple".
    - AUFGABE: #Skorna
    - Eine Reihe mit verschiedenen Karten, die alle Verteilungen auf einen Blick darstellen.
    - Karte rausnehmen, stattdessen "zeigen, was das Projekt nicht kann".
    - (siehe Bild, das Sergej gemacht hat und bitte per Slack versendet, dass ich das ASAP umsetzen kann)
 - Fragen:
    - Teaser ist das auf der Startseite, muss sehr kurz sein.
 - Zur Dokumentation:
    - Gewisse Punkte, wie Implementierung, übernimmt Skorna in der Dokumentation _nicht_. -->

<!-- - - - - - - - - - - - - - - - - - - - - -->

## Inhalt
* [Einführung](#einführung)
* [Motivation und Konzept](#motivation-und-konzept)
  * [Hypothesen](#hypothesen)
* [Daten und Auswertung](#daten-und-auswertung)
  * [Datenquellen](#datenquellen)
  * [Datenerhebung und -aufbereitung](#datenerhebung-und-aufbereitung)
    * [Overpass-Turbo API-Anfragen](#overpass-turbo-api-anfragen)
    * [Skript zum CSV-Join](#skript-zum-csv-join)
    * [Änderungen des Datensatzes](#änderungen-des-datensatzes)
* [Prototypen](#prototypen)
  * [Papier-Prototyp](#papier-prototyp)
  * [HTML-JS-Prototyp](#html-js-prototyp)
* [Visualisierung und Ergebnisse](#visualisierung-und-ergebnisse)
  * [Choroplethenkarte](#choroplethenkarte)
  * [Scatterplots](#scatterplots)
  * [Tooltip-Kreisdiagramme](#tooltip-kreisdiagramme)
  * [Implementierung](#implementierung)
  * [Ergebnisse](#ergebnisse)
  * [Kritische Betrachtung](#kritische-betrachtung)
* [Fazit](#fazit)
* [Credits](#credits)

<!-- - - - - - - - - - - - - - - - - - - - - -->

## Einführung     *PATRICK STREITMATTER*
_text goes here..._


## Motivation und Konzept     *PATRICK STREITMATTER*
_text goes here..._

Als weitere Motivation lässt sich auch anführen, dass Hamburg generell berühmt, wenn nicht sogar berüchtigt, für seine kulturellen Angebote ist.

### Hypothesen
Durch das Projekt sollen zwei große Hypothesen belegt werden:<br/>
1. Je weiter ein Stadtteil vom geographischen Stadtzentrum entfernt ist, umso mehr verdienen dessen Einwohner im Durchschnitt.
2. Es besteht ein Zusammenhang zwischen der Entfernung einzelner Stadtteile zum Stadtzentrum und deren Unterhaltungsangeboten.
3. Es besteht ein Zusammenhang zwischen dem durchschnittlichen Einkommen einzelner Stadtteile und deren Unterhaltungsangeboten.

Als Nebenhypothese gilt dazu noch zu belegen:<br/>
1. Es befinden sich viele "Nachtleben"-Unterhaltungsangebote in Zentrumsnähe, was auf ein Vergnügungsviertel schließen lässt.
2. Stadtviertel, die als "Vergnügungsviertel" bekannt sind, weisen eine besonders hohe Anzahl an Bars und Diskotheken auf.

Diese werden folgend auch abkürzend als Hypothese 1 (H1) und Hypothese 2 (H2), sowie Nebenhypothese 1 (NH1) und Nebenhypothese 2 (NH2) bezeichnet.

## Daten und Auswertung
Für die Erhebung und Auswertung der Daten haben wir auf staatliche Datenquellen (Statistik-Nord) und öffentliche Informationeen (Overpass, GitHub, GeoPy-Geocoders) zugegriffen.

### Datenquellen
Für die Daten haben wir insgesamt vier Quellen.
* [Statistik-Nord](http://www.statistik-nord.de/fileadmin/maps/Stadtteil_Profile_2018/atlas.html)
    * Einkommen pro Steuerpflichtigen nach Stadtteilen
    * Offizielle Seite der nördlichen Länder, daher vermutlich inhaltlich korrekt.
    * Nur kleine Anpassungen nötig.<br/>"Semikolon"-Trennzeichen wurde zu Komma geändert.
* [Overpass-Turbo](https://overpass-turbo.eu/s/K2y)
    * "Points Of Interest", wie Bars, Diskotheken, Kinos, Museen, Theater.
    * API-Anfragen via Python als Möglichkeit, alle "Nodes" (POIs) für jeden Stadtteil jeweils einzeln zu erfragen.
    * Vollständigkeit schwer zu überprüfen, scheint jedoch gegeben zu sein.
* [Github](https://gist.github.com/webtobesocial/935759ba975ffd9f6df6d1059fe5ad82)
    * GeoJSON-Daten für Choroplethenkarte
    * Akkurate Darstellung der Hamburger Stadtteile
* [GeoPy-Geocoders](https://pypi.org/project/geopy/)
    * Zur Berechnung der Entfernung einzelner Stadtteile zum geographischen Mittelpunkt Hamburgs

### Datenerhebung und -aufbereitung
Die Datenerhebung und -aufbereitung geschah größtenteils durch automatisierte Verfahren. Es wurden kleinere Anpassungen an den Datensätzen manuell durchgeführt.

#### Overpass-Turbo API-Anfragen
* [Executable Python-File](https://raw.githubusercontent.com/informatik-mannheim/gdv-ss2019-hamburg/master/data/skorna.py?token=AI7J2BUYLD4H3KGMB4NMCXC5CJ32S)
* [Overpass-API-Skript](https://raw.githubusercontent.com/informatik-mannheim/gdv-ss2019-hamburg/master/data/overpass_api.py?token=AI7J2BX4CWGWV2SIAD7YXVS5CJ3WE)

Es musste ein Skript geschrieben werden, da Overpass-Turbo keine Möglichkeit bietet, knapp einhundert Anfragen automatisch zu versenden und auszulesen.<br/>
Mit diesem Skript werden für die Hamburger Stadtteile die Entfernung zu der Stadtmitte Hamburgs berechnet und mittels Overpass-Turbo(-API) die vorkommenden "Points of Interests" (POIs) gezählt und ausgegeben. Daraus wird dann eine CSV-Datei mit dem Header `Stadtteil,Stadtbezirk,Stadt,Land,Entfernung,Bars,Diskotheken,Kinos,Theater,Museen` generiert.

Der Lesbarkeit halber wurden zwei Dateien für das Skript angelegt und die Generierungsfunktion `hamburg_POIs_count_fast(keywords, stadtteil)` ausgelagert. Der Methodennamenteil `_fast` wurde hingezugefügt, da die Laufzeit des Skriptes von anfänglichen zehn Stunden auf eine halbe Stunde reduziert werden konnte.

#### Skript zum CSV-Join
* [CSV-Join-Skript](https://raw.githubusercontent.com/informatik-mannheim/gdv-ss2019-hamburg/master/data/einkommen_entfernung.py?token=AI7J2BSAJU5UZQ66LG4XN2K5CJ3VM)

Mit diesem Skript wird die Datenverarbeitung in der Implementierungsphase vereinfacht.<br/>
Das Skript fügt zwei ähnliche CSV-Dateien und deren über einen gemeinsamen Nenner (z.B. den Stadtteilnamen) zusammen. Das Skript wurde genutzt, die Daten aus GeoPy mit den Daten von Statistik-Nord automatisiert zusammenzulegen. Der neue CSV-Header ist dann `Stadtgebiet,Einkünfte,Entfernung`.<br/>
Die Join-Logik entspricht einem Inner Join. Stadtgebiet ist gleichbedeutend mit Stadtteil.

#### Änderungen des Datensatzes
Der Stadtteil "Hamburg-Neuwerk" wurde aus dem Datensatz entfernt.<br/>
Als 100 km entfernte Exklave mit nur 36 Einwohnern spielt Neuwerk für unsere Datenanalyse keine Relevanz und kann als Ausreißer auch in der Visualisierung vernachlässigt werden.<br/>
Zur statistischen Auswertung der Daten wurden temporäre Änderungen vorgenommen, welche sich nicht auf die Visualisierung auswirken, was im Bereich [Ergebnisse](#Ergebnisse) genauer erklärt ist.

## Prototypen     *PATRICK STREITMATTER*
Wir haben zwei grundlegende Prototypen in unserem Entwicklungsprozess entworfen. Sowohl den [Papierprotoypen](#Papier-Prototyp) als auch den, sich kontinuierlich weiterentwickelnden, [HTML-JS-Protoypen](#HTML-JS-Prototyp).

_text goes here..._

### Papier-Prototyp     *PATRICK STREITMATTER*
_text goes here..._


<figure>
  <img src="{{ site.urlimg }}/projekt_hamburg/PapierPrototyp.jpg"/>
  <figcaption>Der Papierprototyp, ohne Daten mit erstem Farbentwurf nach Stadtbezirken.</figcaption>
</figure>

### HTML-JS-Prototyp     *PATRICK STREITMATTER*
_text goes here..._

## Visualisierung und Ergebnisse
_text goes here..._

### Visualisierung     *SIMON KARL*
_text goes here..._
#### Choroplethenkarte     *SIMON KARL*
_text goes here..._
Die Basis der Choroplethenkarte besteht aus einem SVG-Bild der Stadt Hamburg. Die jeweiligen Stadtteile Hamburgs wurden mit _..._ realisiert. 

Wir haben uns für diese Visualisierungstechnik entschieden, da man anhand einer Choroplethenkarte sehr gut die einzelnen Unterschiede zwischen den Stadtteilen erkennen kann und diese so auch nach derer geographischen Lage einordnen kann.
_text goes here..._

<figure>
  <img src="{{ site.urlimg }}/projekt_hamburg/Kartenreihe.png"/>
  <figcaption>Unterhaltungsangebote (POIs) in Hamburg nach Stadtteilen. (v.l.n.r. Bars, Diskotheken, Museen, Theater, Kinos.)</figcaption>
</figure>

#### Scatterplots     *SIMON KARL*
_text goes here..._

#### Tooltip-Kreisdiagramme  *SIMON KARL*
_die beim anklicken..._
(aka: Kreisdiagramm. Bitte das Wort verwenden.)

### Implementierung     *SIMON KARL*
_text goes here..._

### Ergebnisse
Als Resultat haben wir eine funktionsfähige JavaScript-Anwendung entwickelt, welche die Möglichkeit bietet, verschiedene Unterhaltungsangebote anhand einer Choroplethenkarte mit dem Einkommen in dem selbigen Stadtteil zu vergleichen. Des Weiteren ist es durch das Anklicken eines Stadtteils in der Choroplethenkarte möglich, die Anzahl der Unterhaltungsangebote in Relation zueinander zu sehen. Mit dem [Kreisdiagramm](#Tooltip-Kreisdiagramme) ist es möglich, so auch mehrere Stadtteile zu vergleichen, indem mehrere Stadtteile nacheinander angeklickt werden. Der Scatterplot im unteren Teil unserer Anwendung stellt das Durchschnittseinkommen eines Stadtteils in Entfernung zum Stadtzentrum dar, sodass eine weitere Visualiserungstechnik zur Einkommensverteilung Hamburgs gegeben ist.<br/>

Besonders interessant ist hierbei die statistische Signifikanz des durchschnittlichen Einkommens in Relation zur Entfernung zur Stadtmitte.<br/>
Der komplette Einkommensdatensatz mit allen 104 Stadtteilen weist eine Signifikanz von _p = 0.09312_ auf und ist damit als "nicht signifikant" zu betrachten.
Entfernt man nun die 9 wohlhabensten Stadtteile, welche bei einem Einkommen von über 75'000€/Jahr -- fast um das Doppelte über dem bundesdeutschen Durchschnitt der Vollzeitarbeitnehmer (45'240€/Jahr) -- liegen, ist der Datensatz mit _p = 0.01065_ statistisch signifikant. Der _Signifikanzwert p_ ist im gesamten Datensatz jeweils _p < 0.1_, weswegen man von einem Trend und einer gegebenenfalls-signifikanten Korrelation (_rho = 0.166_ bzw. _rho = 0.262_) sprechen kann.<br/>
Demnach lässt sich vermuten, dass Menschen umso weiter weg wohnen werden, je mehr sie im Jahr verdienen und wohlhabendere Stadtteile meistens nicht im Zentrum liegen.

<!-- ggf. noch Regressionsgrade als Bild hinzufügen -->
<!-- hier kommt noch Ergebnis aus POI-Karte(?) -->

### Kritische Betrachtung
Wir erkennen an, dass wir in unserer Auswertung die Bevölkerungsanzahl und -dichte einzelner Stadtteile nicht berücksichtigt haben. Des Weiteren erkennen wir auch an, dass der Begriff "Unterhaltungs-" beziehungsweise "Vergnügungsviertel" keinerlei einheitliche Definition oder Kriterien kennt, weswegen wir uns hier auf die allgemeine Einschätzung verschiedener Internetseiten und Reiseführer beziehen. Die [erweiterten Diagramme](#Tooltip-Kreisdiagramme) in unserem Projekt funktionieren, bedürfen allerdings noch einer zusätzlichen Legende, die wir zeitlich leider nicht realisieren konnte. Die Farben der "Tooltip-Diagramme" entsprechen jedoch der jeweiligen Farben der Unterhaltungsangebote, was der Wiedererkennung der einzelnen Werte entgegenkommt. <!-- DAS WICHTIG: HAT SERGEJ JETZT DIE LEGENDE DRIN??? -->

## Fazit
Zusammenfassend lässt sich sagen, dass die Hypothese 1, dass ein Zusammenhang zwischen Entfernung zum Stadtzentrum und dem durchschnittlichen Einkommen der Stadtteile besteht, lässt sich am Beispiel "Hamburg" nicht zweifelsfrei belegen, aber auch nicht widerlegen. Aufgrund der teilweise signifikanten Daten und einem erkennbaren Trend bedarf es für ein endgültiges Ergebnis noch weitere Forschung und weitere Großstädte als Vergleichspunkte.

Hingegen lässt sich Hypothese 2 am Beispiel Hamburg gut belegen. Besonders in Zentrumsnähe befindet sich eine hohe Anzahl an Bars und Diskotheken. Diese Tendenz lässt darauf schließen, dass dort auch ein besonders hohes Touristenaufkommen sein könnte, welches den Unterhaltungsangeboten einen hohen Umsatz einbringt. Es ist daher ein Zusammenhang zur Hypothese 3 zu beachten. 

Zusammen mit dem vergleichsweise geringen Durchschnittseinkommen, schlussfolgern wir, dass dort auch die Mieten vergleichsweise günstig sind, was den Unterhaltungsangebotsbetreibern eine höhere Profitspanne einbringt, was zwar nahelegt, dass die Hypothese 3 zutreffen könnte, deren Einfluss auf die Standortwahl verschiedener Unterhaltungsangebotsbetreiber allerdings nur einen marginalen Einfluss haben wird, wenn wir dies mit Hypothese 2 vergleichen.

Zu den Nebenhypothesen 1 und 2 lässt sich zusammenfassend sagen, dass gerade stadtzentrumsnahe Stadtteile, wie St. Pauli, Sternschanze oder HafenCity, allgemein als "Unterhaltungs-" oder "Vergnügungsviertel" bekannt sind. Diese besitzen ein vergleichsweise geringes Einkommen und weisen eine hohe Zentralität auf. Deren relativ hohes Aufkommen an Bars und Diskotheken lässt daher vermuten, dass eine Korrelation besteht.

## Credits
### Team
Kryvoruchko, Sergej<br/>
Skorna, Michell<br/>
Karl, Simon<br/>
Streitmatter, Patrick<br/>
### Kurs, Dozent, Institution
Grundlagen der Datenvisualisierung - Sommersemester 2019<br/>
Prof. Dr. Till Nagel<br/>
Hochschule Mannheim<br/>
### Zuständigkeiten
_Kryvoruchsko, Sergej:_<br/>
* Oberflächendesign
* Implementation
  * JavaScript, D3
  * Choroplethenkarte
  * Scatterplots
  * Tooltip-Kreisdiagramme

_Skorna, Michell:_<br/>
* Datenerhebung, Datenaufbereitung
* Implementation
  * Python
* Dokumentation
  * Daten und Auswertung
  * Ergebnisse
  * Einschränkung und Diskussion
  * Fazit
* Poster

_Karl, Simon:_<br/>
* Dokumentation
  * Visualisierung
  * Implementierung
  
_Streitmatter, Patrick:_<br/>
* Dokumentation
  * Einführung
  * Motivation und Konzept
  * Prototypen
<br/>
<!-- https://i.imgur.com/IM19W7o.png --> 
<br/>

<!-- ########################## 
<br/>
<br/>
## Einführung / Konzept
- Einführung: Was ist die Motivation hinter Ihrem Projekt?
- Konzept: Was ist die Grundidee, Hauptfrage, wichtigste Hypothese?

## Daten / Auswertung

### Daten
Quellen, Erhebung, Parsing, Aggregation, ...

Wir haben die Daten von [OpenStreetMap](http://openstreetmap.org/) genutzt, ...

### Prozess
Sinnvolle Auswahl relevanter Experimente.

<figure>
  <img src="{{ site.urlimg }}/meinProjekt/template-image1.jpg" />
  <figcaption>Eine Bildbeschreibung</figcaption>
</figure>

## Prototyp / Ergebnisse

### Visualisierung
Ergebnisse, Design, Prototyp. Darstellungen echter oder ausgewählter Daten.

### Erkenntnisse
Was haben Sie herausgefunden? Können Sie ein/zwei Aussagen oder Stories hervorheben?

### Implementierung
Wie haben Sie die Visualisierung umgesetzt? Welche Tools haben Sie für welche Schritte eingesetzt?


{% highlight javascript %}
function setup() {
  Data data = loadData();
  doSomeVisualization(data);
}
{% endhighlight %}


## Fazit
- Reflektion: Haben Sie erreicht, was sie wollten? Ist Ihr Ergebnis hilfreich?
- Ausblick: Welche weiteren Ideen haben Sie? Was könnten interessante
nächste Schritte sein? -->